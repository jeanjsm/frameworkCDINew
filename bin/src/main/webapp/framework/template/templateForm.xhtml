<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:nea="http://java.sun.com/jsf/composite/neainformatica/framework/components" xmlns:c="http://java.sun.com/jsp/jstl/core" template="/framework/template/template.xhtml">

	<ui:define name="body">

		 
		<f:metadata>
			<f:event type="preRenderView" listener="#{controller.initConversation}" />
		</f:metadata>
		
		<p:panel rendered="#{identity.loggedIn}" style="border:none;">

			<h:form id="formTemplate" prependId="false" style="border:none;" enctype="multipart/form-data">

				<p:tabView id="tbvTemplateList" style="#{controller.definirWidthForm(max-width)}" styleClass="formRelevo" dynamic="true" cache="false">

					<p:tab title="#{nomeTela}" id="tabList">
						<p:commandLink action="#{controller.cancel()}" title="Clique aqui para fechar" ajax="false" immediate="true">
							<p:graphicImage name="neainformatica/framework/images/close23.png" id="form_close" styleClass="nea-close-icon" />
						</p:commandLink>
						<p:panel id="panelCampos">

							<p:messages id="messagesTemplateForm" closable="true" escape="false"/>

							<ui:insert name="camposForm" />
							<br />

						</p:panel>
						<br />

						<div class="nea-button-fields" align="center">
						
							<ui:insert name="botoesAdicionaisEsquerda" />
						
							<p:commandButton id="btnSalvar" value="Salvar" icon="save" accesskey="s" title="Salvar registro. (Alt + S)" action="#{controller.salvar}" ajax="false"
								rendered="#{(empty exibeBotaoSalvar ? true : exibeBotaoSalvar) and (controller.state eq 'EDIT' or controller.state eq 'INSERT') and (!naSessionController.sistemaEmModoSomenteLeitura)}"
								style="text-align: center; font-size-adjust: inherit; font-size: 8pt; height: 30px; width: 80px;" />
							<p:spacer width="5px" />
							<p:commandButton id="btnSalvarMais" value="Salvar+" accesskey="b" title="Salvar e criar novo registro. (Alt + B)" icon="saveplus" action="#{controller.salvarMais}" ajax="false"
								rendered="#{(empty exibeBotaoSalvarMais ? true : exibeBotaoSalvarMais) and (controller.state eq 'INSERT') and (!naSessionController.sistemaEmModoSomenteLeitura)}"
								style="text-align: center; font-size-adjust: inherit; font-size: 8pt; height: 30px; width: 80px;" />
							<p:spacer width="5px" />
							<p:commandButton id="btnCancelar" value="Cancelar" icon="cancelar" accesskey="c" title="Cancelar. (Alt + C)" immediate="true" action="#{controller.cancel}" ajax="false"
								rendered="#{(empty exibeBotaoCancelar ? true : exibeBotaoCancelar)}" style="text-align: center; font-size-adjust: inherit; font-size: 8pt; height: 30px; width: 80px;" />
							<p:spacer width="5px" />

							<ui:insert name="botoesAdicionaisDireita" />

						</div>

						<br />
					</p:tab>
				</p:tabView>
			</h:form>

		</p:panel>
		
		
		<ui:insert name="areaForaFormPrincipal" />

		<nea:ajaxStatus id="ajstForm" />
		

	</ui:define>

</ui:composition>